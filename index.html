<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eolo - Energía del Viento</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --blue-900:#024e81;
      --blue-700:#046a9f;
      --soft:#eaf4ff;
      --muted:#6b7280;
      --card-shadow: 0 10px 30px rgba(2,34,75,0.09);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:"Inter",system-ui,Arial;background:linear-gradient(180deg,#fbfdff,#f3f8ff);color:var(--blue-900);-webkit-font-smoothing:antialiased}
    a{color:inherit}
    header{position:sticky;top:0;z-index:90;display:flex;align-items:center;justify-content:space-between;padding:12px 24px;background:linear-gradient(90deg, rgba(2,78,129,0.98), rgba(2,64,105,0.98));color:white;box-shadow:0 8px 26px rgba(2,34,75,0.12);backdrop-filter: blur(6px)}
    .brand{display:flex;gap:12px;align-items:center;text-decoration:none;color:white}
    .brand img{height:48px;border-radius:8px;background:rgba(255,255,255,0.06);padding:4px}
    .brand h1{font-size:18px;margin:0;font-weight:800}
    nav{display:flex;gap:18px;align-items:center}
    nav a{color:white;text-decoration:none;font-weight:600;padding:8px 12px;border-radius:10px;transition:background .18s}
    nav a:hover{background:rgba(255,255,255,0.06)}
    .cta{background:white;color:var(--blue-900);padding:8px 14px;border-radius:10px;font-weight:700}
    .menu-toggle{display:none}
    @media(max-width:880px){nav{display:none;position:absolute;right:18px;top:66px;flex-direction:column;width:260px;background:var(--blue-900);padding:12px;border-radius:10px} .menu-toggle{display:block}}
    .hero{display:flex;gap:36px;align-items:center;justify-content:space-between;padding:56px 6vw;margin:22px auto;max-width:1300px;background:linear-gradient(180deg,rgba(255,255,255,0.75),rgba(255,255,255,0.5));border-radius:20px;box-shadow:var(--card-shadow);overflow:hidden}
    .hero-left{flex:1;min-width:260px}
    .eyebadge{display:inline-block;background:var(--soft);color:var(--blue-900);padding:6px 10px;border-radius:999px;font-weight:700;margin-bottom:12px;font-size:15px}
    .hero h2{font-size:34px;margin:6px 0 12px}
    .lead{color:var(--muted);max-width:70ch;margin:0 auto 12px}
    .actions{display:flex;gap:12px;flex-wrap:wrap}
    .btn-primary{background:var(--blue-900);color:white;padding:12px 18px;border-radius:10px;border:none;cursor:pointer;font-weight:700;box-shadow:0 10px 26px rgba(2,78,129,0.12)}
    .btn-primary:hover{background:var(--blue-700)}
    .btn-ghost{background:transparent;color:var(--blue-900);padding:12px 16px;border-radius:10px;border:2px solid rgba(2,78,129,0.08);cursor:pointer;font-weight:700}
    .hero-right{flex:1;display:flex;align-items:center;justify-content:center}
    .hero-art{width:92%;border-radius:16px;box-shadow:0 18px 40px rgba(2,34,75,0.08);overflow:hidden;border:6px solid rgba(255,255,255,0.6)}
    .hero-art img{width:100%;display:block;object-fit:cover;height:360px}
    .banners{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:18px auto;max-width:1300px;padding:0 6vw}
    .banner{border-radius:12px;overflow:hidden;box-shadow:var(--card-shadow)}
    .banner img{width:100%;height:120px;object-fit:cover;display:block}
    section{padding:52px 6vw}
    .cards{grid-template-columns:repeat(auto-fit,minmax(260px,1fr));display:grid;gap:18px}
    .card{background:white;border-radius:12px;padding:18px;box-shadow:0 12px 30px rgba(2,34,75,0.06);display:flex;flex-direction:column;gap:12px}
    .card img{width:100%;height:160px;object-fit:cover;border-radius:8px}
    .prod-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;align-items:center}
    .prod-gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .prod-gallery img{width:100%;height:180px;object-fit:cover;border-radius:10px}
    .contact-panel{background:linear-gradient(90deg,#eaf6ff,#f7fff9);border-radius:16px;padding:22px;box-shadow:var(--card-shadow)}
    form{display:grid;gap:12px}
    label{font-weight:600;color:var(--blue-900);font-size:14px}
    input[type="text"],input[type="email"],select,textarea{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(2,34,75,0.08);font-size:14px;background:white}
    textarea{min-height:120px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .form-actions{display:flex;gap:10px;align-items:center}
    .msg{padding:10px;border-radius:10px;font-weight:700;display:none}
    .msg.success{background:linear-gradient(90deg,#dffcf0,#e6fff7);color:#00664f}
    .msg.error{background:#fff0f0;color:#8a1a1a}

    /* CARRUSEL (background-size: contain para evitar recortes). */
    .carousel-wrap-full { position:relative; width:100%; overflow:hidden; margin:24px 0; background:#000; z-index:0; }
    .carousel-track { display:flex; width:100%; transition:transform .8s cubic-bezier(.22,.9,.3,1); will-change:transform; }
    .slide {
      flex:0 0 100%;
      display:block;
      aspect-ratio:16/9;
      min-height:40vh;
      max-height:80vh;
      overflow:hidden;
      background-color:#fbfdff;
      background-position:center center;
      background-repeat:no-repeat;
      background-size:contain;
      opacity:0;
      transform: translateY(12px);
      transition: opacity .56s cubic-bezier(.2,.9,.3,1), transform .56s cubic-bezier(.2,.9,.3,1);
    }
    .slide.fade-in { opacity:1; transform: translateY(0); }

    .carousel-controls { position:absolute; inset:auto 12px 12px; display:flex; align-items:center; justify-content:center; gap:12px; width:calc(100% - 24px); pointer-events:none; }
    .carousel-controls button { pointer-events:auto; background:rgba(0,0,0,0.45); color:#fff; border:none; width:40px; height:40px; border-radius:8px; font-size:24px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:background .18s, transform .12s; }
    .dots { display:flex; gap:8px; align-items:center; justify-content:center; pointer-events:auto; }
    .dot { width:10px;height:10px;border-radius:999px;background:rgba(255,255,255,0.45); cursor:pointer; transition:transform .18s, background .18s; box-shadow:0 2px 6px rgba(0,0,0,0.18); }
    .dot.active { background:#fff; transform:scale(1.25); }

    /* Fade helper for safe elements */
    .fade-init { opacity:0; transform: translateY(12px); transition: opacity .56s cubic-bezier(.2,.9,.3,1), transform .56s cubic-bezier(.2,.9,.3,1); will-change: opacity, transform; color: inherit; }
    .fade-in { opacity:1 !important; transform: translateY(0) !important; }

    /* Image pop */
    .img-pop { transform: scale(.98); opacity:0; transition: transform .6s cubic-bezier(.22,.9,.3,1), opacity .56s; }
    .img-pop.visible { transform: scale(1); opacity:1; }

    /* Responsive behavior general */
    @media (max-width:980px){
      .hero{flex-direction:column;padding:32px}
      .hero-art img{height:260px}
      .banners{grid-template-columns:repeat(2,1fr)}
      .prod-grid{grid-template-columns:1fr}
      .row{grid-template-columns:1fr}
    }
    @media (max-width:760px){
      header{padding:10px}
      .banners{grid-template-columns:1fr}
      .slide{min-height:30vh}
    }

    /* CONTACT: stack when not enough width */
    @media (max-width:900px){
      #contact-grid {
        grid-template-columns: 1fr !important;
      }
    }

    footer{background:linear-gradient(90deg,#013a5a,#012836);color:white;padding:22px;text-align:center;border-top:4px solid rgba(255,255,255,0.03); position:relative; z-index:2;}
    .no-reveal { will-change: auto; }

    /* Social icons */
    .socials { display:flex; gap:10px; align-items:center; }
    .social-link { display:inline-flex; width:40px; height:40px; align-items:center; justify-content:center; border-radius:8px; background: rgba(255,255,255,0.06); color: white; text-decoration:none; transition: transform .12s, background .12s, box-shadow .12s; }
    .social-link svg { width:20px; height:20px; display:block; }
    .social-link:hover { transform: translateY(-3px); background: rgba(255,255,255,0.12); box-shadow: 0 8px 20px rgba(2,34,75,0.14); }
    @media (prefers-color-scheme: light) { .social-link { color: var(--blue-900); background: rgba(255,255,255,0.9); } }

    /* FIX: títulos y subtítulos visibles */
    main h1, main h2, main h3, main h4, .lead, .card h3, section > h2, section > h3 {
      color: var(--blue-900) !important;
      text-shadow: none !important;
      background: transparent !important;
      display: block !important;
      line-height: 1.15 !important;
      z-index: 5 !important;
      position: relative !important;
      -webkit-font-smoothing: antialiased !important;
    }
    main h1.fade-init, main h2.fade-init, main h3.fade-init, .lead.fade-init, .card h3.fade-init {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
    header h1, header h2, footer h1, footer h2 { color: #fff !important; }
    section [class*="img-"], section img, .carousel-wrap-full, .carousel-track, .slide { z-index: 0 !important; }
    section { position: relative; }

    /* accessibility: ensure links show inherited color */
    main h2 a, main h3 a { color: inherit !important; text-decoration: underline; }
    /* Parche: asegurar que la cabecera esté siempre visible */
    header {
      position: sticky !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      z-index: 9999 !important;           /* por encima de todo */
      background: linear-gradient(90deg, rgba(2,78,129,0.98), rgba(2,64,105,0.98)) !important;
      color: #fff !important;
      pointer-events: auto !important;
      opacity: 1 !important;
      transform: none !important;
      box-shadow: 0 8px 26px rgba(2,34,75,0.12) !important;
    }

    /* Si hay elementos hijos con opacity/transform forzados por .fade-init */
    header * { opacity: 1 !important; transform: none !important; }

    /* Evita que el carrusel o slides creen stacking context que tape el header */
    .carousel-wrap-full, .carousel-track, .slide { z-index: 0 !important; }

    /* Si usás un contenedor que cubre la cabecera con position fixed/absolute, lo reducimos */
    body > *:not(header) {
      /* solo si hay un overlay no intencional; quita estas líneas si no quieres este comportamiento global */
      z-index: auto !important;
    }

    /* Asegura contraste en el logo y links del header */
    header .brand, header nav a, header .cta { color: #fff !important; }
    /* FIX: asegurar visibilidad del botón "Pedir información" */
    header .cta {
      background: #ffffff !important;
      color: var(--blue-900) !important;
      font-weight: 800 !important;
      padding: 10px 16px !important;
      border-radius: 10px !important;
      box-shadow: 0 8px 20px rgba(2,34,75,0.12) !important;
      z-index: 10001 !important;          /* por encima de overlays */
      position: relative !important;
      display: inline-flex !important;
      align-items: center !important;
      justify-content: center !important;
      text-decoration: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
    header .cta:focus, header .cta:hover {
      background: #f7fbff !important;
      transform: translateY(-1px) !important;
    }
    /* botón WhatsApp */
    #waLink { color: #25D366; /* verde WhatsApp */ }
    #waLink svg { width:20px; height:20px; display:block; }
    #waLink .icon-bg { display:none; } /* por si tenías un fondo SVG viejo */
    .social-link { background: rgba(255,255,255,0.06); } /* mantiene estilo */
    #waLink:hover { filter: brightness(1.05); transform: translateY(-2px); }
    /* Logos: tamaño responsive, alta resolución y espaciado */
    .brand img, [data-key="logoFoot"], footer img[data-key="logoFoot"] {
      height: 56px !important;        /* tamaño por defecto en escritorio */
      width: auto !important;
      max-width: 220px !important;
      display: block;
      object-fit: contain;
      margin: 0;
      vertical-align: middle;
    }

    /* Ajuste fino del contenedor de la marca en header */
    header .brand { gap: 14px; align-items: center; }

    /* Footer: tamaño ligeramente más pequeño que header pero mayor que antes */
    footer img[data-key="logoFoot"] { height: 48px !important; }

    /* Mobile: reducir ligeramente para no romper layout */
    @media (max-width: 880px) {
      .brand img, footer img[data-key="logoFoot"] { height: 44px !important; }
      header { padding: 10px 14px !important; }
    }

    /* Si tu logo tiene versión retina (2x), usa srcset en el HTML para mejor nitidez */

  </style>
</head>
<body>

  <header class="fade-init">
    <a class="brand" href="#home">
      <img src="images/logo.png" alt="Logo Eolo" data-key="logo">
      <h1>Eolo</h1>
    </a>

    <div style="display:flex;align-items:center;gap:12px">
      <nav id="nav">
        <a href="#que-hacemos">Qué hacemos</a>
        <a href="#quienes-somos">Quiénes somos</a>
        <a href="#produccion">Producción</a>
        <a href="#contacto">Contacto</a>
      </nav>
      <button class="cta" onclick="document.getElementById('contacto').scrollIntoView({behavior:'smooth'})">Pedir información</button>
      <div class="menu-toggle" onclick="toggleMenu()" aria-hidden="true" style="margin-left:8px">☰</div>
    </div>
  </header>

  <main>
    <section class="hero fade-init" id="home" aria-label="Hero">
      <div class="hero-left">
        <div class="eyebadge fade-init">Ahorrate un vueltaje!</div>
        <h2 class="fade-init">Impulsamos el futuro con la fuerza del viento</h2>
        <p class="lead fade-init">Diseñamos, fabricamos e instalamos aerogeneradores para hogares, comunidades y proyectos industriales.</p>
        <div class="actions fade-init">
          <button class="btn-primary" onclick="document.getElementById('contacto').scrollIntoView({behavior:'smooth'})">Quiero información</button>
          <button class="btn-ghost" onclick="document.getElementById('produccion').scrollIntoView({behavior:'smooth'})">Ver producción</button>
        </div>
        <div class="kpi" style="margin-top:18px;display:flex;gap:18px;justify-content:center;flex-wrap:wrap">
          <div class="item fade-init" style="background:white;padding:14px;border-radius:10px;box-shadow:0 8px 24px rgba(2,34,75,0.05);min-width:140px;text-align:center"><h4 style="margin:0">+120</h4><p style="margin:0;color:var(--muted)">Unidades instaladas</p></div>
          <div class="item fade-init" style="background:white;padding:14px;border-radius:10px;box-shadow:0 8px 24px rgba(2,34,75,0.05);min-width:140px;text-align:center"><h4 style="margin:0">Producción</h4><p style="margin:0;color:var(--muted)">Serie local y escalable</p></div>
        </div>
      </div>

      <div class="hero-right">
        <figure class="hero-art fade-init" role="img" aria-label="Aerogenerador">
          <img class="img-pop" src="images/aerogenerador.jpg" alt="Aerogenerador" data-key="aero">
        </figure>
      </div>
    </section>

    <section id="galeria" class="fade-init">
      <h2 class="fade-init">Galería</h2>

      <div class="carousel-wrap-full">
        <div class="carousel-track" id="carouselTrack">
          <div class="slide" data-bg="images/banner1.jpg" role="img" aria-label="Banner 1"></div>
          <div class="slide" data-bg="images/banner2.jpg" role="img" aria-label="Banner 2"></div>
          <div class="slide" data-bg="images/banner3.jpg" role="img" aria-label="Banner 3"></div>
          <div class="slide" data-bg="images/banner4.jpg" role="img" aria-label="Banner 4"></div>
        </div>

        <div class="carousel-controls">
          <button id="prevBtn" aria-label="Anterior">‹</button>
          <div class="dots" id="carouselDots"></div>
          <button id="nextBtn" aria-label="Siguiente">›</button>
        </div>
      </div>
    </section>

    <section id="que-hacemos" class="fade-init">
      <h2 class="fade-init">Qué hacemos</h2>
      <p class="lead fade-init">Ofrecemos fabricación, instalación, mantenimiento, charlas educativas y repuestos.</p>

      <div class="cards" style="margin-top:18px">
        <article class="card fade-init">
          <img class="img-pop" src="images/plano.jpg" alt="Diseño e innovación" data-key="banner4">
          <h3>Diseño e innovación</h3>
          <p>Nos adaptamos a vos, diseñamos aerogeneradores segun tu terreno y necesidades</p>
        </article>

        <article class="card fade-init">
          <img class="img-pop" src="images/produccion_estator.jpg" alt="Producción estator" data-key="prod1">
          <h3>Producción y montaje</h3>
          <p>Procesos controlados y con el mejor equipo para entregar equipos robustos y confiables.</p>
        </article>

        <article class="card fade-init">
          <img class="img-pop" src="images/produccion_resina.jpg" alt="Resina y acabado" data-key="prod2">
          <h3>Acabado y controles de calidad</h3>
          <p>Todos nuestros equipos son probados y tienen garantia</p>
        </article>

        <article class="card fade-init">
          <img class="img-pop" src="images/banner4.jpg" alt="Planos y proyectos" data-key="plano">
          <h3>Mantenimiento</h3>
          <p>Garantizamos la durabilidad de tu aerogenerador ¡No dejes de producir!</p>
        </article>
      </div>
    </section>

    <section id="quienes-somos" class="fade-init">
      <h2 class="fade-init">Quiénes somos</h2>
      <p class="lead fade-init">Equipo tecnico con experiencia en ingeniería, fabricación y educación ambiental. Queremos lo mejor para el medio ambiente.</p>

      <div style="margin-top:18px;display:flex;gap:18px;flex-wrap:wrap;justify-content:center">
        <div style="max-width:640px" class="card fade-init">
          <h3>Nuestra misión</h3>
          <p>Impulsar el futuro con energía limpia, brindando soluciones eólicas eficientes y sostenibles para un mundo mejor.</p>
          <h3>Valores</h3>
          <p>Transparencia; calidad; sostenibilidad; capacitación y trabajo con comunidades locales.</p>
        </div>

        <div style="max-width:360px" class="card fade-init">
          <h3>Servicios</h3>
          <ol>
            <li>Aerogenerador</li>
            <li>Aerogenerador + instalación</li>
            <li>Mantenimiento</li>
            <li>Charlas educativas</li>
            <li>Pack de repuestos</li>
          </ol>
        </div>
      </div>
    </section>

    <section id="produccion" class="fade-init">
      <h2 class="fade-init">Producción</h2>
      <p class="lead fade-init">Bobinado, resinado y control de calidad para garantizar unidades listas para instalación.</p>

      <div class="prod-grid" style="margin-top:18px">
        <div>
          <div class="prod-gallery">
            <img class="img-pop fade-init" src="images/produccion_estator.jpg" alt="Estator" data-key="prod1b">
            <img class="img-pop fade-init" src="images/produccion_resina.jpg" alt="Resina" data-key="prod2b">
            <img class="img-pop fade-init" src="images/produccion_resina2.jpg" alt="Resina 2" data-key="prod3b">
            <img class="img-pop fade-init" src="images/banner1.jpg" alt="Proceso" data-key="banner1b">
          </div>
        </div>

        <div>
          <div class="card fade-init">
            <h3>Líneas de montaje</h3>
            <p>Líneas modulares para lotes piloto y escalado, con pruebas funcionales en cada unidad.</p>
            <h3 style="margin-top:8px">Planos y certificaciones</h3>
            <p>Planos y procedimientos de pruebas para garantizar funcionamiento en distintas condiciones.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="contacto" class="fade-init">
      <h2 class="fade-init">Contacto y solicitud</h2>
      <p class="lead fade-init">Completa el formulario y te contactamos para cotizar o coordinar una visita técnica.</p>

      <div id="contact-grid" style="margin-top:18px;max-width:1100px;margin-left:auto;margin-right:auto;display:grid;grid-template-columns:1fr 420px;gap:18px">
        <div class="contact-panel fade-init">
          <form id="leadForm" onsubmit="return handleSubmit(event)" novalidate>
            <div class="row">
              <div>
                <label for="nombre">Nombre completo</label>
                <input id="nombre" name="nombre" type="text" placeholder="Tu nombre" required>
              </div>
              <div>
                <label for="correo">Correo electrónico</label>
                <input id="correo" name="correo" type="email" placeholder="tu@ejemplo.com" required>
              </div>
            </div>

            <div>
              <label for="producto">Producto de interés</label>
              <select id="producto" name="producto" required>
                <option value="">-- Selecciona --</option>
                <option value="Aerogenerador">Aerogenerador</option>
                <option value="Aerogenerador + instalacion">Aerogenerador + instalación</option>
                <option value="Mantenimiento">Mantenimiento</option>
                <option value="Charlas educativas">Charlas educativas</option>
                <option value="Pack de repuestos">Pack de repuestos</option>
              </select>
            </div>

            <div>
              <label for="mensaje">Mensaje (opcional)</label>
              <textarea id="mensajeInput" name="mensaje" placeholder="Cuéntanos el proyecto, ubicación o preguntas"></textarea>
            </div>

            <div class="form-actions" style="margin-top:6px">
              <button class="btn-primary" type="submit">Enviar solicitud</button>
              <button type="button" class="btn-ghost" onclick="resetForm()">Limpiar</button>
            </div>

            <div style="margin-top:12px">
              <div id="formMsg" class="msg" role="status"></div>
              <p style="margin-top:8px;color:var(--muted)">Te responderemos en 48-72h hábiles.</p>
            </div>
          </form>
        </div>

        <aside class="card fade-init" style="height:100%">
          <h3>Información de contacto</h3>
          <p style="color:var(--muted)">Eolo • Producción local y servicio técnico</p>
          <p style="margin:8px 0"><strong>Tel:</strong> +54 9 297 533 8145</p>
          <p style="margin:8px 0"><strong>Email:</strong> eolosrl@outlook.com.ar</p>

          <h3 style="margin-top:14px">Ubicación</h3>
          <p style="color:var(--muted)">General Joaquin 0, Comodoro Rivadavia, Chubut, Argentina</p>
          <div style="margin-top:10px">
            <img class="img-pop" src="images/ubicacion.jpg" alt="Plano de ubicación" style="width:100%;height:140px;object-fit:cover;border-radius:8px" data-key="planoSmall">
          </div>
        </aside>
      </div>
    </section>

    <section style="padding-top:28px;padding-bottom:60px" class="fade-init">
      <h2 class="fade-init">Preguntas frecuentes</h2>
      <div style="max-width:1100px;margin:18px auto;display:grid;gap:10px">
        <details class="card fade-init"><summary style="font-weight:700">¿Qué garantías ofrecen?</summary><p style="margin-top:8px;color:var(--muted)">Garantía en componentes críticos y asistencia técnica según contrato.</p></details>
        <details class="card fade-init"><summary style="font-weight:700">¿Hacen instalaciones remotas?</summary><p style="margin-top:8px;color:var(--muted)">Sí, coordinamos envíos e instalación con partners.</p></details>
        <details class="card fade-init"><summary style="font-weight:700">¿Puedo recibir capacitación?</summary><p style="margin-top:8px;color:var(--muted)">Ofrecemos charlas educativas y capacitaciones técnicas.</p></details>
      </div>
    </section>
  </main>

  <footer>
    <div style="max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div style="display:flex;gap:12px;align-items:center">
        <img src="images/logo.png" alt="Eolo" style="height:36px" data-key="logoFoot">
      </div>

      <div style="color:#bcd8ff">© <span id="year"></span> Eolo. Todos los derechos reservados.</div>

      <div class="socials" aria-label="Redes sociales">
        <a class="social-link" id="igLink" href="https://www.instagram.com/eolosrl?igsh=NzJ5Y3AwNzNneDMx" aria-label="Instagram" title="Instagram" target="_blank" rel="noopener noreferrer">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 6.2A4.8 4.8 0 1 0 16.8 13 4.8 4.8 0 0 0 12 8.2zm5.2-.9a1.1 1.1 0 1 0 1.1 1.1 1.1 1.1 0 0 0-1.1-1.1zM12 9.5A3 3 0 1 1 9 12.5 3 3 0 0 1 12 9.5z"/></svg>
        </a>

        <a class="social-link" id="liLink" href="https://ar.linkedin.com" aria-label="LinkedIn" title="LinkedIn" target="_blank" rel="noopener noreferrer">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true"><path d="M6.94 6.5a1.72 1.72 0 1 1 .01-3.44 1.72 1.72 0 0 1-.01 3.44zM5 9h4v10H5zM11 9h3.8v1.36h.05c.53-1 1.83-2.05 3.77-2.05 4.03 0 4.78 2.66 4.78 6.12V19H19v-5.05c0-1.2-.02-2.74-1.67-2.74-1.67 0-1.93 1.3-1.93 2.66V19h-4V9z"/></svg>
        </a>

        <a class="social-link" id="waLink" href="https://wa.me/5492974080618?text=Hola!%20quiero%20mas%20info" aria-label="WhatsApp" target="_blank" rel="noopener noreferrer">
          <img src="images/whatsapp.png" alt="" width="20" height="20" style="display:block">
        </a>

        <a class="social-link" id="tgLink" href="web.telegram.org" aria-label="Telegram" title="Telegram" target="_blank" rel="noopener noreferrer">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true"><path d="M20.5 3.5L3.5 10.2c-.8.3-.8 1.4 0 1.7l3.7 1.4 1.4 4.2c.2.7 1.2.9 1.7.4L12 16.8l5.5 3.2c.6.3 1.3-.1 1.4-.7l2.1-14.6c.1-.9-.7-1.6-1.5-1.4z"/></svg>
        </a>
      </div>
    </div>
  </footer>

  <script>
/* ---------- Utility & UI helpers ---------- */
function toggleMenu(){
  const nav = document.getElementById('nav');
  nav.style.display = (nav.style.display === 'flex') ? '' : 'flex';
}
document.getElementById('year').textContent = new Date().getFullYear();

function validateEmail(email){
  const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return re.test(email);
}

function showMsg(text, type){
  const el = document.getElementById('formMsg');
  el.textContent = text;
  el.className = 'msg ' + (type === 'success' ? 'success' : 'error');
  el.style.display = 'block';
  setTimeout(()=>{ el.style.display = 'none'; }, 6000);
}

function resetForm(){
  const form = document.getElementById('leadForm');
  if(form) form.reset();
  const el = document.getElementById('formMsg');
  if(el) el.style.display = 'none';
}

/* Form submit handler */
function handleSubmit(e){
  e.preventDefault();
  const nombre = document.getElementById('nombre').value.trim();
  const correo = document.getElementById('correo').value.trim();
  const producto = document.getElementById('producto').value;
  if(!nombre || nombre.length < 2){ showMsg('Por favor ingresa un nombre válido','error'); return false; }
  if(!validateEmail(correo)){ showMsg('Por favor ingresa un correo válido','error'); return false; }
  if(!producto){ showMsg('Selecciona el producto de interés','error'); return false; }
  showMsg('Solicitud enviada correctamente. Gracias, nos contactamos pronto.','success');
  document.getElementById('leadForm').reset();
  return false;
}

/* Fallback loader for images (optional) */
function trySetImg(imgEl, candidates){
  let idx = 0;
  function next(){
    if(idx>=candidates.length) return;
    imgEl.src = candidates[idx++];
  }
  imgEl.addEventListener('error', next);
  next();
}

/* Preload common images to improve perceived load */
(function preload(){
  const list = [
    'images/aerogenerador.jpg','images/logo.png',
    'images/banner1.jpg','images/banner2.jpg','images/banner3.jpg','images/banner4.jpg',
    'images/plano.jpg','images/produccion_estator.jpg','images/produccion_resina.jpg','images/produccion_resina2.jpg'
  ];
  list.forEach(s=>{ const i=new Image(); i.src = s; });
})();

/* Populate src fallbacks on DOMContentLoaded (if you used data-key attributes) */
document.addEventListener('DOMContentLoaded', () => {
  const map = {
    'aero': ['images/aerogenerador.jpg'],
    'logo': ['images/logo.png'],
    'banner1': ['images/banner1.jpg'],
    'banner2': ['images/banner2.jpg'],
    'banner3': ['images/banner3.jpg'],
    'banner4': ['images/banner4.jpg'],
    'plano': ['images/plano.jpg'],
    'prod1': ['images/produccion_estator.jpg'],
    'prod2': ['images/produccion_resina.jpg'],
    'prod3': ['images/produccion_resina2.jpg']
  };
  Object.keys(map).forEach(k => {
    const el = document.querySelector('[data-key="'+k+'"]');
    if(el && el.tagName === 'IMG') trySetImg(el, map[k]);
  });

  // IMMEDIATE REVEAL: reveal #home, #galeria and the contact grid immediately on DOM ready
  const immediate = ['#home', '#galeria', '#contact-grid'];
  immediate.forEach(sel => {
    const el = document.querySelector(sel);
    if(!el) return;
    el.classList.add('fade-in');
    el.querySelectorAll && el.querySelectorAll('.fade-init').forEach(c => c.classList.add('fade-in'));
    el.querySelectorAll && el.querySelectorAll('.img-pop').forEach(img=>{
      if(img.complete || img.naturalWidth){
        img.style.transform = 'scale(1)';
        img.style.opacity = '1';
        img.classList.add('visible');
      } else {
        img.addEventListener('load', function onL(){ img.removeEventListener('load', onL); img.style.transform='scale(1)'; img.style.opacity='1'; img.classList.add('visible'); });
      }
    });
    if(sel === '#galeria'){
      document.querySelectorAll('.slide').forEach(s => s.classList.add('fade-in'));
    }
  });
});

/* ---------- Carousel: backgrounds from data-bg; autoplay; drag/touch; uses container width ---------- */
(function(){
  const track = document.getElementById('carouselTrack');
  if(!track) return;
  // Mark carousel internals as no-reveal to avoid observer interference
  track.classList.add('no-reveal');
  const wrap = track.closest('.carousel-wrap-full');
  if(wrap) wrap.classList.add('no-reveal');

  const slides = Array.from(track.children);
  const dotsWrap = document.getElementById('carouselDots');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');

  // Assign backgrounds from data-bg, preload images and reveal slides when loaded (or after short timeout)
  slides.forEach((slide, idx) => {
    const src = slide.dataset.bg || slide.getAttribute('data-bg');
    if (src) {
      slide.style.backgroundImage = `url('${src}')`;
      slide.setAttribute('role','img');
      const label = slide.getAttribute('aria-label') || '';
      if(label) slide.setAttribute('aria-label', label);

      const img = new Image();
      let revealed = false;
      img.onload = () => {
        revealed = true;
        slide.classList.add('fade-in');
      };
      img.onerror = () => {
        setTimeout(()=> { if(!revealed) slide.classList.add('fade-in'); }, 400);
      };
      img.src = src;
      setTimeout(()=> { if(!revealed) slide.classList.add('fade-in'); }, 1000 + idx*80);
    } else {
      slide.classList.add('fade-in');
    }
  });

  // Carousel configuration
  let index = 0;
  const total = slides.length || 1;
  let interval = null;
  const delay = 4000;
  const transitionMs = 700;
  let animating = false;

  function getContainerWidth(){
    const pw = track.parentElement && track.parentElement.getBoundingClientRect();
    return pw ? pw.width : window.innerWidth;
  }

  function getTranslateForIndex(i){
    const containerWidth = getContainerWidth();
    return -i * containerWidth;
  }

  function createDots(){
    if(!dotsWrap) return;
    dotsWrap.innerHTML = '';
    for(let i=0;i<total;i++){
      const d = document.createElement('div');
      d.className = 'dot' + (i===0 ? ' active' : '');
      d.dataset.i = i;
      d.addEventListener('click', ()=> goTo(Number(d.dataset.i)));
      dotsWrap.appendChild(d);
    }
  }

  function updateDots(){
    if(!dotsWrap) return;
    Array.from(dotsWrap.children).forEach((n,i)=> n.classList.toggle('active', i===index));
  }

  function goTo(i, instant = false){
    if(animating) return;
    animating = true;
    index = (i + total) % total;
    const translateX = getTranslateForIndex(index);
    if(instant) track.style.transition = 'none';
    else track.style.transition = `transform ${transitionMs}ms cubic-bezier(.22,.9,.3,1)`;
    track.style.transform = `translateX(${translateX}px)`;
    updateDots();
    setTimeout(()=>{ animating = false; if(instant) track.style.transition = ''; }, transitionMs + 20);
  }

  function next(){ goTo(index + 1); resetInterval(); }
  function prev(){ goTo(index - 1); resetInterval(); }

  function startInterval(){ if(interval) clearInterval(interval); interval = setInterval(()=> { if(!animating) goTo(index + 1); }, delay); }
  function resetInterval(){ if(interval) clearInterval(interval); startInterval(); }

  track.addEventListener('mouseenter', ()=> { if(interval) clearInterval(interval); });
  track.addEventListener('mouseleave', ()=> resetInterval());

  if(nextBtn) nextBtn.addEventListener('click', next);
  if(prevBtn) prevBtn.addEventListener('click', prev);

  // Touch / drag
  let startX = 0, isDragging = false, prevTranslate = 0;
  track.addEventListener('touchstart', e => {
    const ctWidth = getContainerWidth();
    startX = e.touches[0].clientX;
    isDragging = true;
    if(interval) clearInterval(interval);
    const style = track.style.transform || '';
    const m = style.match(/translateX\((-?\d+\.?\d*)px\)/);
    prevTranslate = m ? parseFloat(m[1]) : -index * ctWidth;
  }, {passive:true});

  track.addEventListener('touchmove', e => {
    if(!isDragging) return;
    const dx = e.touches[0].clientX - startX;
    track.style.transition = 'none';
    track.style.transform = `translateX(${prevTranslate + dx}px)`;
  }, {passive:true});

  track.addEventListener('touchend', e => {
    if(!isDragging) return;
    isDragging = false;
    const endX = e.changedTouches[0].clientX;
    const dx = endX - startX;
    const threshold = getContainerWidth() * 0.15;
    if(dx < -threshold) goTo(index + 1);
    else if(dx > threshold) goTo(index - 1);
    else goTo(index);
    resetInterval();
  });

  // Mouse drag
  track.addEventListener('mousedown', e=> {
    isDragging = true;
    startX = e.clientX;
    const style = track.style.transform || '';
    const m = style.match(/translateX\((-?\d+\.?\d*)px\)/);
    prevTranslate = m ? parseFloat(m[1]) : -index * getContainerWidth();
    if(interval) clearInterval(interval);
    track.style.cursor = 'grabbing';
  });

  window.addEventListener('mousemove', e=> {
    if(!isDragging) return;
    const dx = e.clientX - startX;
    track.style.transition = 'none';
    track.style.transform = `translateX(${prevTranslate + dx}px)`;
  });

  window.addEventListener('mouseup', e=> {
    if(!isDragging) return;
    isDragging = false;
    track.style.cursor = '';
    const dx = e.clientX - startX;
    const threshold = getContainerWidth() * 0.15;
    if(dx < -threshold) goTo(index + 1);
    else if(dx > threshold) goTo(index - 1);
    else goTo(index);
    resetInterval();
  });

  window.addEventListener('resize', ()=> { goTo(index, true); });

  createDots();
  track.style.transition = 'none';
  track.style.transform = 'translateX(0px)';
  requestAnimationFrame(()=> track.style.transition = '');
  goTo(0, true);
  startInterval();
})();

/* ---------- Intersection Observer: safe reveal on scroll (rest of page) ---------- */
(function(){
  const safeSelectors = [
    'main > section',
    '.card',
    '.img-pop',
    'footer'
  ].join(',');
  let items = Array.from(document.querySelectorAll(safeSelectors));
  items = items.filter(el => {
    if(!el) return false;
    if(el.closest && el.closest('.no-reveal')) return false;
    if(el.closest && el.closest('.carousel-wrap-full')) return false;
    const r = el.getBoundingClientRect();
    if(r.width === 0 && r.height === 0) return false;
    // exclude elements we revealed immediately
    if(el.matches && (el.matches('#home') || el.matches('#galeria') || el.matches('#contact-grid'))) return false;
    return true;
  });

  items.forEach(el => { if(!el.classList.contains('fade-init')) el.classList.add('fade-init'); });

  const options = { root:null, rootMargin:'0px 0px -12% 0px', threshold:0.12 };

  const revealElement = (el) => {
    if(el.classList && el.classList.contains('img-pop')){
      if(el.complete || el.naturalWidth){
        el.style.transform = 'scale(1)';
        el.style.opacity = '1';
        el.classList.add('visible');
      } else {
        el.addEventListener('load', function onL(){ el.removeEventListener('load', onL); el.style.transform = 'scale(1)'; el.style.opacity = '1'; el.classList.add('visible'); });
      }
      el.classList.add('fade-in');
      return;
    }
    el.classList.add('fade-in');
  };

  if('IntersectionObserver' in window){
    const io = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if(entry.isIntersecting){
          const el = entry.target;
          if(el.closest && (el.closest('.carousel-wrap-full') || el.closest('.no-reveal'))) {
            observer.unobserve(el);
            return;
          }
          revealElement(el);
          observer.unobserve(el);
        }
      });
    }, options);
    items.forEach(el => io.observe(el));
  } else {
    document.addEventListener('DOMContentLoaded', () => { items.forEach(el => revealElement(el)); });
  }
})();
  </script>
</body>
</html>


